{% extends 'layout/main.html.twig' %}

{% block pagetitle %}
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">Přidat příspěvek</h1>
        </div>
    </div>
{% endblock %}
{% block body %}
    <div class="row">
        <div class="panel-body">
            <div class="row">
              {{ form_start(form) }}
              {{ form_errors(form) }}
              <div class="col-md-12 col-sm-12 col-xs-12">
                {{ form_row(form.prispevatel_email) }}
              </div>
              <div class="col-md-12 col-sm-12 col-xs-12">
                {{ form_row(form.prispevek_nazev) }}
              </div>
              <div class="col-md-12 col-sm-12 col-xs-12">
                {{ form_row(form.prispevek_text) }}
              </div>
              <div class="col-md-6 col-sm-6 col-xs-6">
                {{ form_row(form.prispevek_casopis) }}
              </div>
              <div class="col-md-6 col-sm-6 col-xs-6">
                {{ form_row(form.prispevek_tema) }}
              </div>
              <br>
              <div class="col-md-12 col-sm-12 col-xs-12">
                  <br>
                  <button type="submit" class="btn btn-default pull-right" style="margin-right: inherit">Pošli příspěvek</button>
              </div>
              {{ form_end(form) }}
            </div>
        </div>
    </div>
{% endblock %}
{% block javascripts %}
  <script>
    $(document).ready(function(){
      $('#prispevek_prispevek_casopis').on('change', function (){
        $('#prispevek_prispevek_tema').html('');

        $.post(Routing.generate('get_temata_for_casopis', { casopis: $(this).val() }), function( data ) {
          console.log(data.options);
          $.each(data.options, function(i, d) {

              // You will need to alter the below to get the right values from your json object.  Guessing that d.id / d.modelName are columns in your carModels data
              $('#prispevek_prispevek_tema').append('<option value="' + d['id'] + '">' + d['nazev'] + '</option>');
          });
        });
      });
    });
  </script>
{% endblock %}
